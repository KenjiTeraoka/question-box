(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3678)}])},3678:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthStateChanged:function(){return d},default:function(){return x}});var l=n(5893),s=n(916),c=n(1163),o=n(7294),a=n(8578),u=n(694),i=n(1664),r=n.n(i),h=n(3247);function d(e){let{auth:t,setUser:n}=e;return(0,o.useEffect)(()=>{let e=(0,a.Aj)(t,e=>{n(e)});return()=>{e()}},[t,n]),null}function x(){let{isLogin:e,isLoading:t}=(0,s.a)(),n=(0,c.useRouter)(),[i,x]=(0,o.useState)(null),[m,p]=(0,o.useState)(""),[g,f]=(0,o.useState)([]);if((0,o.useEffect)(()=>{let e=(0,h.hJ)(u.R,"question");(0,h.PL)(e).then(e=>{console.log(e.docs.map(e=>e.id)),f(e.docs.map(e=>e.id))})},[m]),t)return null;let b=Math.random().toString(36).substring(7),w=async()=>{await (0,h.pl)((0,h.JU)(u.R,"question","".concat(b)),{})},j=new a.hJ,N=()=>{(0,a.rh)(u.I,j).then(e=>{console.log(e.user.displayName),n.push("/")}).catch(e=>{console.log(e)})},v=()=>(0,a.w7)(u.I).then(()=>{console.log("Sign-out successful.")}).catch(e=>{console.log(e)}),y=e=>{e.preventDefault(),g.includes(m)?(console.log("match!"),n.push("/posts/".concat(m))):(console.log("no match..."),alert("部屋がありません。"))},k=e=>{p(e.target.value)};return(0,l.jsx)("div",{className:"min-h-screen py-12",children:(0,l.jsxs)("div",{className:"max-w-lg min-h-full py-20 mx-auto text-center bg-white rounded-xl",children:[(0,l.jsx)(d,{auth:u.I,setUser:x}),(0,l.jsx)("h2",{className:"text-6xl",children:"QuestionBox"}),(0,l.jsx)("p",{className:"mt-2 text-lg",children:"質問箱"}),(0,l.jsx)("p",{className:"mt-10",children:"Welcome to the Question Box!"}),(0,l.jsxs)("div",{className:"mt-12",children:[i?(0,l.jsx)("div",{className:"flex items-end w-2/3 h-12 mx-auto",children:(0,l.jsxs)("div",{className:"w-full text-center",children:["Login: ",i.email,(0,l.jsx)("span",{onClick:v,className:"ml-4 text-blue-500 hover:opacity-60",children:"singn out"})]})}):(0,l.jsx)("button",{onClick:N,className:"block w-2/3 h-12 py-2 mx-auto text-white bg-blue-900 rounded-lg",children:"Login"}),i?(0,l.jsxs)("div",{children:[(0,l.jsx)(r(),{href:"/posts/".concat(b),onClick:w,children:(0,l.jsx)("div",{className:"block w-2/3 py-3 mx-auto mt-5 text-white bg-blue-900 rounded-lg hover:opacity-60",children:"+新しい部屋を作る"})}),(0,l.jsx)("form",{onSubmit:y,children:(0,l.jsx)("input",{className:"block w-2/3 px-4 py-3 mx-auto mt-5 text-center text-white placeholder-white bg-blue-900 rounded-lg focus:border-0 focus:bg-opacity-80",type:"text",placeholder:"部屋の番号を入力してくだい",value:m,onChange:k})})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"block w-2/3 py-3 mx-auto mt-5 text-white bg-blue-900 rounded-lg opacity-30",children:"+新しい部屋を作る"}),(0,l.jsx)("div",{className:"block w-2/3 py-3 mx-auto mt-5 text-white bg-blue-900 rounded-lg opacity-30",children:"部屋の番号を入力してくだい"})]})]})]})})}}},function(e){e.O(0,[424,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);